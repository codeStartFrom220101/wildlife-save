"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[517],{5117:function(t,a,e){var s=e(6330),i=TypeError;t.exports=function(t,a){if(!delete t[a])throw i("Cannot delete property "+s(a)+" of "+s(t))}},541:function(t,a,e){var s=e(2109),i=e(7908),o=e(6244),r=e(3658),c=e(5117),n=e(7207),l=1!==[].unshift(0),d=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();s({target:"Array",proto:!0,arity:1,forced:l||d},{unshift:function(t){var a=i(this),e=o(a),s=arguments.length;if(s){n(e+s);var l=e;while(l--){var d=l+s;l in a?a[d]=a[l]:c(a,d)}for(var u=0;u<s;u++)a[u]=arguments[u]}return r(a,e+s)}})},4677:function(t,a,e){var s=e(9876),i=e(594),o=e(6294);const r=(0,o.Z)();a["Z"]=(0,s.Q_)("cartStore",{state:()=>({nowPage:"",pageCount:1,order:{user:{},products:{}},cartList:[]}),actions:{getCartPage(t="cart"){switch(this.nowPage=t,t){case"cart":this.pageCount=1;break;case"order":this.pageCount=2;break;case"checkout":this.pageCount=3;break;case"finished":this.pageCount=4,setTimeout((()=>{this.pageCount++}),1500);break}},getOrder(t){const a=`https://vue3-course-api.hexschool.io/api/ldd-api/order/${t}`;i.Z.get(a).then((t=>{const a=t.data.order;this.order=a}))},addToCart(t,a=1){const e="https://vue3-course-api.hexschool.io/api/ldd-api/cart";r.loadingItem=t.id;const s={product_id:t.id,qty:a};i.Z.post(e,{data:s}).then((t=>{r.loadingItem="",this.getCartData()}))},getCartData(){r.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/cart";i.Z.get(t).then((t=>{t.data.success&&(r.isLoading=!1,this.cartList=t.data.data.carts)}))},delProductFromCart(t){const a=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t}`;i.Z["delete"](a).then((t=>{this.getCartData()}))},updateCart(t){r.isLoading=!0,r.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty},e=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t.id}`;this.$http.put(e,{data:a}).then((()=>{r.isLoading=!1,r.loadingItem="",this.getCartData()}))}}})},4238:function(t,a,e){e(541),e(7658);var s=e(9876),i=e(594),o=e(6294);const r=(0,o.Z)();a["Z"]=(0,s.Q_)("productStore",{state:()=>({productList:[],productCategoryList:[],pagination:{},categorys:[],categoryNow:"全部商品",product:{},similarList:[],animalList:[]}),actions:{getProducts(t=1){r.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/ldd-api/products?page=${t}`;i.Z.get(a).then((t=>{t.data.success&&(r.isLoading=!1,console.log(t),this.productList=t.data.products,this.productCategoryList=this.productList,this.pagination=t.data.pagination,this.getCategoryList())}))},categoryChange(t){this.categoryNow=t,this.productCategoryList="全部商品"===t?this.productList:this.productList.filter((a=>a.category===t))},getCategoryList(){const t=this.productList.map((t=>t.category));this.categorys=Array.from(new Set(t)),this.categorys.unshift("全部商品")},getProduct(t){r.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/ldd-api/product/${t}`;i.Z.get(a).then((t=>{t.data.success&&(r.isLoading=!1,this.product=t.data.product,this.getSimilar())}))},getSimilar(){this.similarList=[],r.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/products/all";i.Z.get(t).then((t=>{if(t.data.success){r.isLoading=!1;const a=t.data.products.filter((t=>t.category===this.product.category)),e=a.findIndex((t=>t.id===this.product.id)),s=[];for(let t=0;t<a.length;t++)s.push(t);s.sort((()=>.5-Math.random()));const i=s.findIndex((t=>t===e));s.splice(i,1),this.similarList.push(a[s[0]]),this.similarList.push(a[s[1]]),this.similarList.push(a[s[2]])}}))},getAnimalList(){r.isLoading=!0;const t="http://localhost:5000/animals";i.Z.get(t).then((t=>{r.isLoading=!1,console.log(t.data),this.animalList=t.data}))}}})},6294:function(t,a,e){var s=e(9876);a["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,loadingItem:""})})},8604:function(t,a,e){e.d(a,{Z:function(){return y}});var s=e(6252),i=e(3577),o=e(9963);const r={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},n={class:"page-item"},l=(0,s._)("span",{"aria-hidden":"true"},"«",-1),d=[l],u=["onClick"],p={class:"page-item"},g=(0,s._)("span",{"aria-hidden":"true"},"»",-1),h=[g];function f(t,a,e,l,g,f){return(0,s.wg)(),(0,s.iD)("nav",r,[(0,s._)("ul",c,[(0,s._)("li",n,[(0,s._)("a",{class:(0,i.C_)(["page-link",{disabled:!e.pages.has_pre}]),href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=(0,o.iM)((t=>f.updatePage(e.pages.current_page-1)),["prevent"]))},d,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"page-item",key:t},[(0,s._)("a",{class:(0,i.C_)(["page-link",{active:t===e.pages.current_page}]),href:"#",onClick:(0,o.iM)((a=>f.updatePage(t)),["prevent"])},(0,i.zw)(t),11,u)])))),128)),(0,s._)("li",p,[(0,s._)("a",{class:(0,i.C_)(["page-link",{disabled:!e.pages.has_next}]),href:"#","aria-label":"Next",onClick:a[1]||(a[1]=(0,o.iM)((t=>f.updatePage(e.pages.current_page+1)),["prevent"]))},h,2)])])])}var m={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},_=e(3744);const v=(0,_.Z)(m,[["render",f]]);var y=v},5517:function(t,a,e){e.r(a),e.d(a,{default:function(){return bt}});var s=e(6252),i=e(3577),o=e(9963);const r=t=>((0,s.dD)("data-v-0b5d0f96"),t=t(),(0,s.Cn)(),t),c=r((()=>(0,s._)("div",{class:"loadingio-spinner-ripple-o01nobacpbk"},[(0,s._)("div",{class:"ldio-0zlqpdibb6ki"},[(0,s._)("div"),(0,s._)("div")])],-1))),n=r((()=>(0,s._)("div",{class:"banner"},null,-1))),l={class:"container py-6"},d={class:"text-black pb-5"},u={class:"row justify-content-around mb-2 row-cols-2"},p={class:"col"},g={class:"text-danger"},h=r((()=>(0,s._)("div",{class:"col"},null,-1))),f={class:"row justify-content-around"},m={class:"col-2 d-none d-md-block"},_={class:"px-2"},v=r((()=>(0,s._)("h2",{class:"h5 mt-2"},"產品類型",-1))),y={class:"list-unstyled category-menu"},b=["onClick"],w={class:"col-md-9"},C={class:"row row-cols-1 row-cols-lg-3 g-3 g-md-5"},L={class:"card h-100"},k={class:"container-img"},x=["src","alt"],D={class:"card-body d-flex flex-column"},P={class:"card-title"},Z={class:"text-white bg-secondary rounded fs-8 px-1 ms-2"},$={class:"d-flex flex-column justify-content-between h-100"},j={class:"card-text mb-1 fs-7"},z={class:"card-text text-end"},I={class:"card-footer"},N=["onClick"],T={class:"d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px"}},U={key:1,class:"spinner-grow text-primary spinner-grow-sm",role:"status"},W=r((()=>(0,s._)("span",{class:"visually-hidden"},null,-1))),B=[W];function M(t,a,e,r,W,M){const S=(0,s.up)("LoadingOverlay"),q=(0,s.up)("font-awesome-icon"),H=(0,s.up)("router-link"),Y=(0,s.up)("CartBtn"),E=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(S,{active:t.isLoading},{default:(0,s.w5)((()=>[c])),_:1},8,["active"]),n,(0,s._)("div",l,[(0,s._)("section",d,[(0,s._)("div",u,[(0,s._)("div",p,[(0,s.Wm)(H,{to:"home"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{icon:"fa-solid fa-house"})])),_:1}),(0,s.Uk)(" / "),(0,s.Wm)(H,{to:"productList"},{default:(0,s.w5)((()=>[(0,s.Uk)("市集")])),_:1}),(0,s.Uk)(" / "),(0,s._)("span",g,(0,i.zw)(t.categoryNow),1)]),h]),(0,s._)("div",f,[(0,s._)("div",m,[(0,s._)("div",_,[v,(0,s._)("ul",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.categorys,(a=>((0,s.wg)(),(0,s.iD)("li",{class:"py-1",key:a.id},[(0,s._)("a",{href:"#",class:(0,i.C_)({active:a===t.categoryNow}),onClick:(0,o.iM)((e=>t.categoryChange(a)),["prevent"])},(0,i.zw)(a),11,b)])))),128))])])]),(0,s._)("div",w,[(0,s._)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.productCategoryList,((a,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:e},[(0,s._)("div",L,[(0,s._)("div",k,[(0,s._)("img",{src:a.imageUrl,class:"card-img-top object-fit-cover",alt:a.title,style:{height:"200px"}},null,8,x)]),(0,s._)("div",D,[(0,s._)("h5",P,[(0,s.Uk)((0,i.zw)(a.title)+" ",1),(0,s._)("span",Z,(0,i.zw)(a.category),1)]),(0,s._)("div",$,[(0,s._)("p",j,(0,i.zw)(a.description),1),(0,s._)("p",z,"$NT "+(0,i.zw)(a.price),1)])]),(0,s._)("div",I,[(0,s.Wm)(H,{to:`/userboard/productList/${a.id}`,class:(0,i.C_)(["btn btn-outline-primary",{"stretched-link":t.loadingItem!==a.id&&""===t.loadingItem}])},{default:(0,s.w5)((()=>[(0,s.Uk)("查看商品")])),_:2},1032,["to","class"]),(0,s._)("a",{href:"#",onClick:(0,o.iM)((e=>t.addToCart(a)),["prevent"]),class:(0,i.C_)(["btn btn-outline-primary position-absolute cartBtn fs-4 d-block",{disabled:t.loadingItem===a.id}])},[(0,s._)("div",T,[t.loadingItem!==a.id?((0,s.wg)(),(0,s.j4)(q,{key:0,icon:"fa-solid fa-cart-plus"})):((0,s.wg)(),(0,s.iD)("div",U,B))])],10,N)])])])))),128))])])])]),(0,s.Wm)(Y,{onDelProduct:t.delProductFromCart,cartList:t.cartList},null,8,["onDelProduct","cartList"]),(0,s.Wm)(E,{pages:t.pagination,onEmitPages:t.getProducts},null,8,["pages","onEmitPages"])])],64)}const S=t=>((0,s.dD)("data-v-6606ef5a"),t=t(),(0,s.Cn)(),t),q={class:"bi bi-cart cart-two",ref:"cartBtn"},H={class:"position-absolute fs-8 rounded-circle bg-primary d-flex justify-content-center align-items-center product-num",ref:"productNum"},Y={class:"position-fixed cart-container rounded",ref:"cart"},E={class:"card h-100 p-3"},K={class:"d-flex align-items-center justify-content-between border-bottom px-2 pb-2"},A=S((()=>(0,s._)("h4",{class:"mb-0"},"購物車清單",-1))),F={class:"list-unstyled",style:{"overflow-y":"scroll"}},O={class:"row g-1 m-0"},Q={class:"col-4"},G=["src","alt"],J={class:"col-8"},R={class:"d-flex justify-content-between align-items-center h-100"},V={class:"fs-7"},X={class:"mb-0 fs-8"},tt=S((()=>(0,s._)("br",null,null,-1))),at=["onClick"],et=S((()=>(0,s._)("i",{class:"bi bi-trash"},null,-1))),st=[et],it={key:0,class:"border-top"},ot={key:1},rt=S((()=>(0,s._)("p",{class:"text-center"},"購物車還沒有產品~",-1))),ct=[rt];function nt(t,a,e,o,r,c){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{class:"cart-btn-container position-fixed rounded-circle bg-white d-flex justify-content-center align-items-center fs-2",style:{right:"1rem",bottom:"1rem",width:"60px",height:"60px","z-index":"3"},onClick:a[0]||(a[0]=(...t)=>c.openCart&&c.openCart(...t))},[(0,s._)("i",{class:(0,i.C_)(["bi bi-cart cart-one",{"d-none":r.status.cartout}])},null,2),(0,s._)("i",q,null,512),(0,s._)("div",H,[(0,s._)("span",null,(0,i.zw)(e.cartList.length),1)],512)]),(0,s._)("div",Y,[(0,s._)("div",E,[(0,s._)("div",K,[A,(0,s._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a[1]||(a[1]=(...t)=>c.closeCart&&c.closeCart(...t))})]),(0,s._)("ul",F,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cartList,(a=>((0,s.wg)(),(0,s.iD)("li",{class:"mt-2",key:a.id},[(0,s._)("div",O,[(0,s._)("div",Q,[(0,s._)("img",{src:a.product.imageUrl,class:"object-fit-cover",style:{height:"75px",width:"75px"},alt:a.product.img},null,8,G)]),(0,s._)("div",J,[(0,s._)("div",R,[(0,s._)("div",null,[(0,s._)("h5",V,(0,i.zw)(a.product.title),1),(0,s._)("p",X,[(0,s.Uk)("NT$ "+(0,i.zw)(t.$filters.currency(a.product.price))+" * "+(0,i.zw)(t.$filters.currency(a.qty)),1),tt,(0,s.Uk)(" 共 NT$ "+(0,i.zw)(t.$filters.currency(a.final_total)),1)])]),(0,s._)("button",{type:"button",onClick:e=>t.$emit("del-product",a.id),class:"btn btn-outline-secondary py-1 px-2 fs-5"},st,8,at)])])])])))),128))]),e.cartList.length>0?((0,s.wg)(),(0,s.iD)("div",it,[(0,s.Wm)(n,{to:"/userboard/cartpage/cart",class:"btn btn-primary w-100 mt-2"},{default:(0,s.w5)((()=>[(0,s.Uk)("快去結帳")])),_:1})])):((0,s.wg)(),(0,s.iD)("div",ot,ct))])],512)])}var lt={data(){return{status:{cartout:!1}}},props:["cartList"],methods:{openCart(){this.$refs.cartBtn.classList.add("active"),this.$refs.cart.classList.add("active"),this.$refs.cartBtn.classList.contains("active")?this.status.cartout=!0:this.status.cartout=!1},closeCart(){this.$refs.cartBtn.classList.remove("active"),this.$refs.cart.classList.remove("active"),setTimeout((()=>{this.status.cartout=!1}),500)}}},dt=e(3744);const ut=(0,dt.Z)(lt,[["render",nt],["__scopeId","data-v-6606ef5a"]]);var pt=ut,gt=e(9876),ht=e(4238),ft=e(4677),mt=e(6294),_t=e(8604),vt={data(){return{}},components:{CartBtn:pt,Pagination:_t.Z},computed:{...(0,gt.rn)(ht.Z,["productCategoryList","pagination","categorys","categoryNow"]),...(0,gt.rn)(ft.Z,["cartList"]),...(0,gt.rn)(mt.Z,["isLoading","loadingItem"])},inject:["pushMessageState","emitter"],methods:{...(0,gt.nv)(ht.Z,["getProducts","categoryChange"]),...(0,gt.nv)(ft.Z,["getCartData","delProductFromCart","addToCart"])},created(){this.getProducts(),this.getCartData()}};const yt=(0,dt.Z)(vt,[["render",M],["__scopeId","data-v-0b5d0f96"]]);var bt=yt}}]);
//# sourceMappingURL=517.5b554fdc.js.map