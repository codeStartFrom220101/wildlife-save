{"version":3,"file":"js/503.8ff32067.js","mappings":"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","sources":["webpack://new-project/./src/stores/cartStore.js","webpack://new-project/./src/stores/statusStore.js","webpack://new-project/./src/views/CartView.vue","webpack://new-project/./src/views/CartView.vue?73a2"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport axios from 'axios'\r\nimport statusStore from '@/stores/statusStore'\r\n\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    // 購物車四頁資料\r\n    nowPage: '',\r\n    pageCount: 1,\r\n    order: {\r\n      user: {},\r\n      products: {}\r\n    },\r\n    // 購物車列表\r\n    cartList: []\r\n  }),\r\n  actions: {\r\n    getCartPage (page = 'cart') {\r\n      this.nowPage = page\r\n      switch (page) {\r\n        case 'cart':\r\n          this.pageCount = 1\r\n          break\r\n        case 'order':\r\n          this.pageCount = 2\r\n          break\r\n        case 'checkout':\r\n          this.pageCount = 3\r\n          break\r\n        case 'finished':\r\n          this.pageCount = 4\r\n          setTimeout(() => {\r\n            this.pageCount++\r\n          }, 1500)\r\n          break\r\n      }\r\n    },\r\n    getOrder (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          const order = res.data.order\r\n          this.order = order\r\n        })\r\n    },\r\n    addToCart (product, qty = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.id,\r\n        qty: qty\r\n      }\r\n      axios.post(api, { data: cart })\r\n        .then((res) => {\r\n          // this.pushMessageState(res, `${product.title ? `\"${product.title}\"` : ''}放入購物車`)\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    },\r\n    getCartData () {\r\n      status.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            status.isLoading = false\r\n            this.cartList = res.data.data.carts\r\n          }\r\n        })\r\n    },\r\n    delProductFromCart (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      axios.delete(api)\r\n        .then((res) => {\r\n          this.getCartData()\r\n        })\r\n    },\r\n    updateCart (product) {\r\n      status.isLoading = true\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.product_id,\r\n        qty: product.qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${product.id}`\r\n      this.$http.put(api, { data: cart })\r\n        .then(() => {\r\n          status.isLoading = false\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: false,\r\n    loadingItem: ''\r\n  })\r\n})\r\n","<template>\r\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\r\n  <h2 class=\"h3 text-black text-center py-2 mb-0\">購物車清單</h2>\r\n  <table class=\"table table-striped mb-0 text-center\">\r\n    <thead>\r\n      <tr v-if=\"cartList.length > 0\">\r\n        <th colspan=\"2\">商品</th>\r\n        <th scope=\"col\">商品單價</th>\r\n        <th scope=\"col\">數量</th>\r\n        <th scope=\"col\">單品項總價</th>\r\n        <th scope=\"col\">刪除</th>\r\n      </tr>\r\n      <tr v-else>\r\n        <th colspan=\"6\" class=\"text-center\">\r\n          <p class=\"mb-1\">您還沒加入任何商品</p>\r\n          <router-link to=\"/userboard/productList\" class=\"btn btn-primary\">點此手刀去選購~</router-link>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(product) in cartList\" :key=\"product.id\">\r\n        <td colspan=\"2\">{{ product.product.title }}</td>\r\n        <td><p class=\"mb-0\">NT$ {{ $filters.currency(product.product.price) }}</p></td>\r\n        <td class=\"d-flex justify-content-center align-items-center h-100\">\r\n          <div class=\"input-group input-group-sm\" style=\"width: 50px;\">\r\n            <input type=\"number\" min=\"1\" class=\"form-control\" v-model.number=\"product.qty\" @change=\"updateCart(product)\">\r\n          </div>\r\n        </td>\r\n        <td>{{ $filters.currency(product.final_total) }}</td>\r\n        <td>\r\n          <button type=\"button\" class=\"btn btn-outline-secondary fs-8 px-2 py-1\" @click=\"delProductFromCart(product.id)\">\r\n            <i class=\"bi bi-trash\"></i>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan=\"6\" class=\"py-5\">\r\n          <div class=\"d-flex flex-column align-items-center\">\r\n            <h3 class=\"h4 mb-2 text-center\">購買須知</h3>\r\n            <p class=\"mb-0 text-start fs-6\">\r\n              ※ 您購買商品之所得將全數用於動物救助行動中。<br>\r\n              ※ 請確認所填寫的資料是否正確，下單後未提供修改付款方式服務。<br>\r\n              ※ 因拍攝略有色差，圖片僅供參考，顏色請以實際收到商品為準。<br>\r\n              ※ 本店商品目前只供應台灣地區，只提供宅配到府。<br>\r\n              ※ 目前支援貨到付款、超商付款。<br>\r\n              ※ 本店商品為統一會於付款後7個工作日內出貨(不含假日)。</p>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan=\"6\" class=\"text-end pe-5\"><button type=\"button\" class=\"btn btn-primary\" @click=\"goToCheck\">建立訂單</button></td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'pinia'\r\nimport cartStore from '@/stores/cartStore'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(cartStore, ['cartList'])\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    ...mapActions(cartStore, ['getCartPage', 'addToCart', 'getCartData', 'delProductFromCart', 'updateCart']),\r\n    goToCheck () {\r\n      this.cartList.length > 0 ? this.$router.push('check') : alert('您的購物車沒有商品~')\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartData()\r\n    this.getCartPage()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=76369d03\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\沈長昱\\\\Desktop\\\\程式資料夾\\\\Vue3\\\\vue3 電商\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","nowPage","pageCount","order","user","products","cartList","actions","getCartPage","page","this","setTimeout","getOrder","id","api","axios","then","res","data","addToCart","product","qty","loadingItem","cart","product_id","getCartData","isLoading","success","carts","delProductFromCart","updateCart","$http","put","_createElementVNode","class","colspan","scope","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","style","_hoisted_19","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_1","_hoisted_2","_ctx","length","_createElementBlock","_hoisted_11","_hoisted_12","_component_router_link","to","_Fragment","key","_hoisted_13","title","_hoisted_14","currency","price","_hoisted_15","_hoisted_16","type","min","onChange","final_total","onClick","_hoisted_21","_hoisted_22","$options","computed","mapState","cartStore","inject","methods","mapActions","goToCheck","$router","push","alert","created","__exports__","render"],"sourceRoot":""}