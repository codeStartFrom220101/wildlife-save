{"version":3,"file":"js/912.93394592.js","mappings":"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","sources":["webpack://new-project/./src/stores/cartStore.js","webpack://new-project/./src/stores/statusStore.js","webpack://new-project/./src/views/CartOrder.vue","webpack://new-project/./src/views/CartOrder.vue?4082"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport axios from 'axios'\r\nimport statusStore from '@/stores/statusStore'\r\n\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    // 購物車四頁資料\r\n    nowPage: '',\r\n    pageCount: 1,\r\n    order: {\r\n      user: {},\r\n      products: {}\r\n    },\r\n    // 購物車列表\r\n    cartList: []\r\n  }),\r\n  actions: {\r\n    getCartPage (page = 'cart') {\r\n      this.nowPage = page\r\n      switch (page) {\r\n        case 'cart':\r\n          this.pageCount = 1\r\n          break\r\n        case 'order':\r\n          this.pageCount = 2\r\n          break\r\n        case 'checkout':\r\n          this.pageCount = 3\r\n          break\r\n        case 'finished':\r\n          this.pageCount = 4\r\n          setTimeout(() => {\r\n            this.pageCount++\r\n          }, 1500)\r\n          break\r\n      }\r\n    },\r\n    getOrder (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          const order = res.data.order\r\n          this.order = order\r\n        })\r\n    },\r\n    addToCart (product, qty = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.id,\r\n        qty: qty\r\n      }\r\n      axios.post(api, { data: cart })\r\n        .then((res) => {\r\n          // this.pushMessageState(res, `${product.title ? `\"${product.title}\"` : ''}放入購物車`)\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    },\r\n    getCartData () {\r\n      status.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            status.isLoading = false\r\n            this.cartList = res.data.data.carts\r\n          }\r\n        })\r\n    },\r\n    delProductFromCart (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      axios.delete(api)\r\n        .then((res) => {\r\n          this.getCartData()\r\n        })\r\n    },\r\n    updateCart (product) {\r\n      status.isLoading = true\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.product_id,\r\n        qty: product.qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${product.id}`\r\n      this.$http.put(api, { data: cart })\r\n        .then(() => {\r\n          status.isLoading = false\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: false,\r\n    loadingItem: ''\r\n  })\r\n})\r\n","<template>\r\n  <h2 class=\"h3 text-black text-center py-2 mb-0\">建立訂單</h2>\r\n  <form class=\"row row-cols-1 p-4 g-3 needs-validation\" novalidate @submit=\"createOrder\">\r\n    <div class=\"col\">\r\n      <div class=\"position-relative\">\r\n        <input type=\"text\" class=\"form-control pt-4\" v-model=\"form.user.name\" required>\r\n        <label for=\"\" class=\"form-label position-absolute top-50 translate-middle-y\" :class=\"{'active': form.user.name.split(' ').join('').length > 0 }\" style=\"left: 15px;\">姓名：</label>\r\n        <div class=\"invalid-feedback\">\r\n          請輸入姓名\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col\">\r\n      <div class=\"position-relative\">\r\n        <input type=\"email\" class=\"form-control pt-4\" v-model=\"form.user.email\" required>\r\n        <label for=\"\" class=\"form-label position-absolute top-50 translate-middle-y\" :class=\"{'active': form.user.email.split(' ').join('').length > 0 }\" style=\"left: 15px;\">電子郵件：</label>\r\n        <div class=\"invalid-feedback\">\r\n          請輸入電子郵件\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col\">\r\n      <div class=\"position-relative\">\r\n        <input type=\"tel\" class=\"form-control pt-4\" v-model=\"form.user.tel\" required>\r\n        <label for=\"\" class=\"form-label position-absolute top-50 translate-middle-y\" :class=\"{'active': form.user.tel.split(' ').join('').length > 0 }\" style=\"left: 15px;\">聯絡電話：</label>\r\n        <div class=\"invalid-feedback\">\r\n          請輸入電話號碼\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col\">\r\n      <div class=\"position-relative\">\r\n        <input type=\"address\" class=\"form-control pt-4\" v-model=\"form.user.address\" required>\r\n        <label for=\"\" class=\"form-label position-absolute top-50 translate-middle-y\" :class=\"{'active': form.user.address.split(' ').join('').length > 0 }\" style=\"left: 15px;\">地址：</label>\r\n        <div class=\"invalid-feedback\">\r\n          請輸入地址\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col\">\r\n      <label for=\"message\" class=\"form-label\" style=\"left: 15px;\">備註：</label>\r\n      <textarea class=\"form-control\" id=\"message\" rows=\"8\" v-model=\"form.user.message\" style=\"resize: none;\"></textarea>\r\n    </div>\r\n    <div class=\"col-12\">\r\n      <div class=\"d-flex justify-content-end\">\r\n        <button class=\"btn btn-primary\" type=\"submit\" @click=\"formValidation\">送出訂單</button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<style>\r\ninput ~ label {\r\n  transition: all .3s;\r\n}\r\n\r\ninput:focus ~ label, label.active{\r\n  font-size: .8rem;\r\n  color: gray;\r\n  top: 5px !important;\r\n  transform: translateY(0) !important;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { mapActions } from 'pinia'\r\nimport cartStore from '@/stores/cartStore'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(cartStore, ['getCartPage']),\r\n    createOrder () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`\r\n      const order = this.form\r\n      this.$http.post(api, { data: order })\r\n        .then((res) => {\r\n          res.data.success ? this.$router.push(`checkout/${res.data.orderId}`) : res.data.message === '購物車內無資料' ? alert('您的購物車還是空的') : alert('您的資料未填完整')\r\n        })\r\n    },\r\n    formValidation () {\r\n      // Fetch all the forms we want to apply custom Bootstrap validation styles to\r\n      const forms = document.querySelectorAll('.needs-validation')\r\n\r\n      // Loop over them and prevent submission\r\n      Array.prototype.slice.call(forms)\r\n        .forEach(function (form) {\r\n          form.addEventListener('submit', function (event) {\r\n            if (!form.checkValidity()) {\r\n              event.preventDefault()\r\n              event.stopPropagation()\r\n            }\r\n\r\n            form.classList.add('was-validated')\r\n          }, false)\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartPage('order')\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartOrder.vue?vue&type=template&id=506f0a9a\"\nimport script from \"./CartOrder.vue?vue&type=script&lang=js\"\nexport * from \"./CartOrder.vue?vue&type=script&lang=js\"\n\nimport \"./CartOrder.vue?vue&type=style&index=0&id=506f0a9a&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\沈長昱\\\\Desktop\\\\程式資料夾\\\\Vue3\\\\vue3 電商\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","nowPage","pageCount","order","user","products","cartList","actions","getCartPage","page","this","setTimeout","getOrder","id","api","axios","then","res","data","addToCart","product","qty","loadingItem","cart","product_id","getCartData","isLoading","success","carts","delProductFromCart","updateCart","$http","put","_createElementVNode","class","for","style","_hoisted_1","novalidate","onSubmit","$options","_hoisted_2","_hoisted_3","type","$data","name","required","split","join","length","_hoisted_4","_hoisted_5","_hoisted_6","email","_hoisted_7","_hoisted_8","_hoisted_9","tel","_hoisted_10","_hoisted_11","_hoisted_12","address","_hoisted_13","_hoisted_14","_hoisted_15","rows","message","_hoisted_16","_hoisted_17","onClick","form","methods","mapActions","cartStore","createOrder","post","$router","push","orderId","alert","formValidation","forms","document","querySelectorAll","Array","prototype","slice","call","forEach","addEventListener","event","checkValidity","preventDefault","stopPropagation","classList","add","created","__exports__","render"],"sourceRoot":""}