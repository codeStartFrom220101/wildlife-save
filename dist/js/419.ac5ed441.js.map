{"version":3,"file":"js/419.ac5ed441.js","mappings":"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","sources":["webpack://new-project/./src/stores/cartStore.js","webpack://new-project/./src/stores/statusStore.js","webpack://new-project/./src/views/CartCheckOutView.vue","webpack://new-project/./src/views/CartCheckOutView.vue?ed02"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport axios from 'axios'\r\nimport statusStore from '@/stores/statusStore'\r\n\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    // 購物車四頁資料\r\n    nowPage: '',\r\n    pageCount: 1,\r\n    order: {\r\n      user: {},\r\n      products: {}\r\n    },\r\n    // 購物車列表\r\n    cartList: []\r\n  }),\r\n  actions: {\r\n    getCartPage (page = 'cart') {\r\n      this.nowPage = page\r\n      switch (page) {\r\n        case 'cart':\r\n          this.pageCount = 1\r\n          break\r\n        case 'order':\r\n          this.pageCount = 2\r\n          break\r\n        case 'checkout':\r\n          this.pageCount = 3\r\n          break\r\n        case 'finished':\r\n          this.pageCount = 4\r\n          setTimeout(() => {\r\n            this.pageCount++\r\n          }, 1500)\r\n          break\r\n      }\r\n    },\r\n    getOrder (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          const order = res.data.order\r\n          this.order = order\r\n        })\r\n    },\r\n    addToCart (product, qty = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.id,\r\n        qty: qty\r\n      }\r\n      axios.post(api, { data: cart })\r\n        .then((res) => {\r\n          // this.pushMessageState(res, `${product.title ? `\"${product.title}\"` : ''}放入購物車`)\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    },\r\n    getCartData () {\r\n      status.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            status.isLoading = false\r\n            this.cartList = res.data.data.carts\r\n          }\r\n        })\r\n    },\r\n    delProductFromCart (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      axios.delete(api)\r\n        .then((res) => {\r\n          this.getCartData()\r\n        })\r\n    },\r\n    updateCart (product) {\r\n      status.isLoading = true\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.product_id,\r\n        qty: product.qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${product.id}`\r\n      this.$http.put(api, { data: cart })\r\n        .then(() => {\r\n          status.isLoading = false\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: false,\r\n    loadingItem: ''\r\n  })\r\n})\r\n","<template>\r\n  <h2 class=\"h3 text-black text-center py-2 mb-0\">確認訂單</h2>\r\n  <div class=\"row g-3 justify-content-center\">\r\n    <div class=\"col-md-6\">\r\n      <table class=\"table\">\r\n        <tbody>\r\n          <tr>\r\n            <th scope=\"row\">下單日期：</th>\r\n            <td>{{ timeChange(order.create_at) }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">訂單編號：</th>\r\n            <td>{{ order.id }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">顧客姓名：</th>\r\n            <td>{{ order.user.name }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">聯絡電話：</th>\r\n            <td>{{ order.user.tel }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">電子郵件：</th>\r\n            <td>{{ order.user.email }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">地址：</th>\r\n            <td>{{ order.user.address }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">是否付款：</th>\r\n            <td :class=\"{ 'text-seccess' : order.is_paid, 'text-danger': !order.is_paid }\">{{ order.is_paid ? '已付款' : '未付款'}}</td>\r\n          </tr>\r\n          <tr>\r\n            <th scope=\"row\">訂單金額：</th>\r\n            <td>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <p class=\"mb-0\">NT$ {{ order.total }}</p>\r\n                <i class=\"bi bi-caret-up p-1 toggle-btn\" :class=\"{'active': status.open}\" @click=\"status.open = !status.open\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOrder\"></i>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"collapse px-2\" id=\"collapseOrder\">\r\n        <h3 class=\"h6 col-12 fw-bold\">購買商品</h3>\r\n        <div class=\"row fw-normal\">\r\n          <div class=\"col-6\">\r\n            <p>商品詳情</p>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <p class=\"text-center\">數量</p>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <p class=\"text-center\">小計</p>\r\n          </div>\r\n          <div class=\"row g-2 mb-2 fs-8 fs-md-7\" v-for=\"(product) in order.products\" :key=\"product.id\">\r\n            <div class=\"col-6\">\r\n              <div class=\"d-flex align-items-center justify-content-around\">\r\n                <img :src=\"product.product.imageUrl\" class=\"object-fit-cover orderImg\" alt=\"\">\r\n                <h4 class=\"fs-8 fs-md-7 mb-0\">{{ product.product.title }}</h4>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-3\">\r\n              <div class=\"d-flex align-items-center justify-content-center h-100\">\r\n                <span>{{ product.qty}}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-3\">\r\n              <div class=\"d-flex align-items-center justify-content-center h-100\">\r\n                <span>NT$ 999</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"d-flex justify-content-end pb-3 px-2\">\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"payOrder(order.id)\">確認付款</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.toggle-btn {\r\n  cursor: pointer;\r\n  transition: all .5s;\r\n  transform-origin: 50% 55%;\r\n}\r\n\r\n.toggle-btn.active {\r\n  transform: rotate(-180deg);\r\n}\r\n\r\n.orderImg {\r\n  height: 100px;\r\n  width: 100px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .orderImg{\r\n    height: 60px;\r\n    width: 60px;\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'pinia'\r\nimport cartStore from '@/stores/cartStore'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      status: {\r\n        open: false\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(cartStore, ['order'])\r\n  },\r\n  methods: {\r\n    ...mapActions(cartStore, ['getCartPage', 'getOrder']),\r\n    timeChange (time) {\r\n      const orderTime = new Date(time * 1000)\r\n      const year = orderTime.getFullYear()\r\n      const month = orderTime.getMonth()\r\n      const date = orderTime.getDate()\r\n      const hour = orderTime.getHours()\r\n      const min = orderTime.getMinutes() >= 10 ? orderTime.getMinutes() : `0${orderTime.getMinutes()}`\r\n      const sec = orderTime.getSeconds() >= 10 ? orderTime.getSeconds() : `0${orderTime.getSeconds()}`\r\n      return `${year}/${month}/${date} ${hour}:${min}:${sec}`\r\n    },\r\n    payOrder (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${id}`\r\n      this.$http.post(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.getOrder(id)\r\n            this.$router.push(`/userboard/cartpage/finished/${id}`)\r\n          }\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    const id = this.$route.params.orderId\r\n    this.getOrder(id)\r\n    this.getCartPage('checkout')\r\n  }\r\n}\r\n\r\n</script>\r\n","import { render } from \"./CartCheckOutView.vue?vue&type=template&id=e6999ac0&scoped=true\"\nimport script from \"./CartCheckOutView.vue?vue&type=script&lang=js\"\nexport * from \"./CartCheckOutView.vue?vue&type=script&lang=js\"\n\nimport \"./CartCheckOutView.vue?vue&type=style&index=0&id=e6999ac0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\沈長昱\\\\Desktop\\\\程式資料夾\\\\Vue3\\\\動物捐獻網站\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e6999ac0\"]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","nowPage","pageCount","order","user","products","cartList","actions","getCartPage","page","this","setTimeout","getOrder","id","api","axios","then","res","data","addToCart","product","qty","loadingItem","cart","product_id","getCartData","isLoading","success","carts","delProductFromCart","updateCart","$http","put","_createElementVNode","class","scope","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","$options","_ctx","create_at","_hoisted_6","_hoisted_7","name","_hoisted_8","tel","_hoisted_9","email","_hoisted_10","address","_hoisted_11","is_paid","_hoisted_12","_hoisted_13","_hoisted_14","total","$data","open","onClick","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_createElementBlock","_Fragment","key","_hoisted_21","_hoisted_22","src","imageUrl","alt","_hoisted_24","title","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","type","computed","mapState","cartStore","methods","mapActions","timeChange","time","orderTime","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","min","getMinutes","sec","getSeconds","payOrder","post","$router","push","created","$route","params","orderId","__exports__","render"],"sourceRoot":""}