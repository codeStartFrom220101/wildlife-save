"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[369],{5117:function(t,a,e){var i=e(6330),s=TypeError;t.exports=function(t,a){if(!delete t[a])throw s("Cannot delete property "+i(a)+" of "+i(t))}},541:function(t,a,e){var i=e(2109),s=e(7908),o=e(6244),c=e(3658),r=e(5117),d=e(7207),l=1!==[].unshift(0),n=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:l||n},{unshift:function(t){var a=s(this),e=o(a),i=arguments.length;if(i){d(e+i);var l=e;while(l--){var n=l+i;l in a?a[n]=a[l]:r(a,n)}for(var p=0;p<i;p++)a[p]=arguments[p]}return c(a,e+i)}})},4677:function(t,a,e){var i=e(9876),s=e(594),o=e(6294);const c=(0,o.Z)();a["Z"]=(0,i.Q_)("cartStore",{state:()=>({nowPage:"",pageCount:1,order:{user:{},products:{}},cartList:[]}),actions:{getCartPage(t="cart"){switch(this.nowPage=t,t){case"cart":this.pageCount=1;break;case"order":this.pageCount=2;break;case"checkout":this.pageCount=3;break;case"finished":this.pageCount=4,setTimeout((()=>{this.pageCount++}),1500);break}},getOrder(t){const a=`https://vue3-course-api.hexschool.io/api/ldd-api/order/${t}`;s.Z.get(a).then((t=>{const a=t.data.order;this.order=a}))},addToCart(t,a=1){const e="https://vue3-course-api.hexschool.io/api/ldd-api/cart";c.loadingItem=t.id;const i={product_id:t.id,qty:a};s.Z.post(e,{data:i}).then((t=>{c.loadingItem="",this.getCartData()}))},getCartData(){c.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/cart";s.Z.get(t).then((t=>{t.data.success&&(c.isLoading=!1,this.cartList=t.data.data.carts)}))},delProductFromCart(t){const a=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t}`;s.Z["delete"](a).then((t=>{this.getCartData()}))},updateCart(t){c.isLoading=!0,c.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty},e=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t.id}`;this.$http.put(e,{data:a}).then((()=>{c.isLoading=!1,c.loadingItem="",this.getCartData()}))}}})},4238:function(t,a,e){e(541),e(7658);var i=e(9876),s=e(594),o=e(6294);const c=(0,o.Z)();a["Z"]=(0,i.Q_)("productStore",{state:()=>({productList:[],productCategoryList:[],categorys:[],categoryNow:"全部商品",product:{},similarList:[],animalList:[]}),actions:{getProducts(t){c.isLoading=!0;const a="https://vue3-course-api.hexschool.io/api/ldd-api/products/all";s.Z.get(a).then((a=>{a.data.success&&(c.isLoading=!1,t?(this.productList=a.data.products.filter((t=>"動物"!==t.category)),this.productCategoryList=this.productList,this.pagination=a.data.pagination,this.getCategoryList()):this.animalList=a.data.products.filter((t=>"動物"===t.category)))}))},categoryChange(t){this.categoryNow=t,this.productCategoryList="全部商品"===t?this.productList:this.productList.filter((a=>a.category===t))},getCategoryList(){const t=this.productList.map((t=>t.category));this.categorys=Array.from(new Set(t)),this.categorys.unshift("全部商品")},getProduct(t){c.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/ldd-api/product/${t}`;s.Z.get(a).then((t=>{t.data.success&&(c.isLoading=!1,this.product=t.data.product,this.getSimilar())}))},getSimilar(){this.similarList=[],c.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/products/all";s.Z.get(t).then((t=>{if(t.data.success){c.isLoading=!1;const a=t.data.products.filter((t=>t.category===this.product.category)),e=a.findIndex((t=>t.id===this.product.id)),i=[];for(let t=0;t<a.length;t++)i.push(t);i.sort((()=>.5-Math.random()));const s=i.findIndex((t=>t===e));i.splice(s,1),this.similarList.push(a[i[0]]),this.similarList.push(a[i[1]]),this.similarList.push(a[i[2]])}}))}}})},6294:function(t,a,e){var i=e(9876);a["Z"]=(0,i.Q_)("statusStore",{state:()=>({isLoading:!1,loadingItem:""})})},3369:function(t,a,e){e.r(a),e.d(a,{default:function(){return rt}});var i=e(6252),s=e(3577),o=e(9963);const c=t=>((0,i.dD)("data-v-6e8cc167"),t=t(),(0,i.Cn)(),t),r={class:"container py-6"},d={class:"row justify-content-center g-3 g-md-5"},l={class:"col-md-6 col-lg-5",style:{height:"500px"}},n=["src"],p={class:"col-md-6 col-lg-5"},u={class:"row"},h={class:"col-12"},g={class:"fw-bold-bottom pb-3"},m=c((()=>(0,i._)("br",null,null,-1))),f={class:"text-white bg-secondary rounded fs-7 px-2 py-1"},v={class:"col-12"},y={class:"border-bottom"},b=c((()=>(0,i._)("p",{class:"mb-0"},"【產品描述】",-1))),_={class:"text-success lh-lg"},w={key:0,class:"mb-3"},x=(0,i.uE)('<span data-v-6e8cc167>尺寸: </span><div class="form-check form-check-inline" data-v-6e8cc167><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked data-v-6e8cc167><label class="form-check-label" for="exampleRadios1" data-v-6e8cc167> S </label></div><div class="form-check form-check-inline" data-v-6e8cc167><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2" data-v-6e8cc167><label class="form-check-label" for="exampleRadios2" data-v-6e8cc167> M </label></div><div class="form-check form-check-inline" data-v-6e8cc167><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3" data-v-6e8cc167><label class="form-check-label" for="exampleRadios3" data-v-6e8cc167> L </label></div><div class="form-check form-check-inline" data-v-6e8cc167><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3" data-v-6e8cc167><label class="form-check-label" for="exampleRadios3" data-v-6e8cc167> XL </label></div>',5),k=[x],C={class:"row"},L={class:"col-6"},I={class:"input-group mb-3"},Z=["disabled"],q={class:"col-6"},D={class:"fs-5 text-end mb-1"},R={class:"d-flex mt-3"},j=["disabled"],P={key:0},T={key:1,class:"spinner-border spinner-border-sm text-white",role:"status"},z=c((()=>(0,i._)("span",{class:"visually-hidden"},null,-1))),S=[z],U=c((()=>(0,i._)("h3",{class:"h4 text-center mt-md-6 mt-5 similarTitle"},"為您推薦相似",-1))),M={class:"row row-cols-md-3 row-cols-1 g-3 g-lg-5 mt-3"},$={class:"card h-100"},W={class:"container-img"},N=["src","alt"],E={class:"card-body d-flex flex-column"},O={class:"card-title"},Q={class:"text-white bg-secondary rounded fs-8 px-1 ms-2"},A={class:"d-flex flex-column justify-content-between h-100"},H={class:"card-text mb-1 fs-7"},Y={class:"card-text text-end"},B={class:"card-footer"},F=["onClick"],K={class:"d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px"}},V={key:1,class:"spinner-grow text-primary spinner-grow-sm",role:"status"},X=c((()=>(0,i._)("span",{class:"visually-hidden"},null,-1))),G=[X];function J(t,a,e,c,x,z){const X=(0,i.up)("LoadingOverlay"),J=(0,i.up)("font-awesome-icon"),tt=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(X,{active:t.isLoading},null,8,["active"]),(0,i._)("div",r,[(0,i._)("div",d,[(0,i._)("div",l,[(0,i._)("img",{src:t.product.imageUrl,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,n)]),(0,i._)("div",p,[(0,i._)("div",u,[(0,i._)("div",h,[(0,i._)("h2",g,[(0,i.Uk)((0,s.zw)(t.product.title),1),m,(0,i._)("span",f,(0,s.zw)(t.product.category),1)])]),(0,i._)("div",v,[(0,i._)("div",y,[b,(0,i._)("div",_,(0,s.zw)(t.product.description),1),"衣服"===t.product.category?((0,i.wg)(),(0,i.iD)("div",w,k)):(0,i.kq)("",!0),(0,i._)("div",C,[(0,i._)("div",L,[(0,i._)("div",I,[(0,i._)("a",{href:"#",onClick:a[0]||(a[0]=(0,o.iM)((t=>z.qtyCount(!0)),["prevent"])),class:(0,s.C_)(["input-group-text btn btn-primary",{disabled:t.loadingItem}]),id:"basic-addon1"},[(0,i.Wm)(J,{icon:"fa-solid fa-caret-up"})],2),(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"你想購買的數量","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":a[1]||(a[1]=t=>x.qty=t),disabled:""!==t.loadingItem},null,8,Z),[[o.nr,x.qty]]),(0,i._)("a",{href:"#",onClick:a[2]||(a[2]=(0,o.iM)((t=>z.qtyCount(!1)),["prevent"])),class:(0,s.C_)(["input-group-text btn btn-primary",{disabled:t.loadingItem}]),id:"basic-addon1"},[(0,i.Wm)(J,{icon:"fa-solid fa-caret-down"})],2)])]),(0,i._)("div",q,[(0,i._)("div",D,"NT "+(0,s.zw)(t.product.price),1)])])])]),(0,i._)("div",R,[(0,i._)("button",{type:"button",onClick:a[3]||(a[3]=a=>t.addToCart(t.product,x.qty)),class:"btn btn-primary px-3 d-block ms-auto",disabled:0===x.qty||""!==t.loadingItem,style:{width:"150px"}},[t.loadingItem?((0,i.wg)(),(0,i.iD)("div",T,S)):((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(J,{icon:"fa-solid fa-cart-plus"}),(0,i.Uk)(" 加入購物車 ")]))],8,j)])])])]),U,(0,i._)("div",M,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.similarList,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:a.id},[(0,i._)("div",$,[(0,i._)("div",W,[(0,i._)("img",{src:a.imageUrl,class:"card-img-top object-fit-cover",alt:a.title,style:{height:"200px"}},null,8,N)]),(0,i._)("div",E,[(0,i._)("h5",O,[(0,i.Uk)((0,s.zw)(a.title)+" ",1),(0,i._)("span",Q,(0,s.zw)(a.category),1)]),(0,i._)("div",A,[(0,i._)("p",H,(0,s.zw)(a.description),1),(0,i._)("p",Y,"$NT "+(0,s.zw)(a.price),1)])]),(0,i._)("div",B,[(0,i.Wm)(tt,{to:`/userboard/productList/${a.id}`,onClick:(0,o.iM)((e=>{t.getProduct(a.id)}),["prevent"]),class:(0,s.C_)(["btn btn-outline-primary",{"stretched-link":t.loadingItem!==a.id&&""===t.loadingItem}])},{default:(0,i.w5)((()=>[(0,i.Uk)("查看商品")])),_:2},1032,["to","onClick","class"]),(0,i._)("a",{href:"#",onClick:(0,o.iM)((e=>t.addToCart(a)),["prevent"]),class:(0,s.C_)(["btn btn-outline-primary position-absolute cartBtn fs-4 d-block",{disabled:t.loadingItem===a.id}])},[(0,i._)("div",K,[t.loadingItem!==a.id?((0,i.wg)(),(0,i.j4)(J,{key:0,icon:"fa-solid fa-cart-plus"})):((0,i.wg)(),(0,i.iD)("div",V,G))])],10,F)])])])))),128))])])],64)}var tt=e(9876),at=e(4677),et=e(4238),it=e(6294),st={data(){return{qty:1}},inject:["pushMessageState","emitter"],props:["id"],computed:{...(0,tt.rn)(et.Z,["product","similarList"]),...(0,tt.rn)(it.Z,["isLoading","loadingItem"])},methods:{...(0,tt.nv)(at.Z,["addToCart"]),...(0,tt.nv)(et.Z,["getProduct"]),qtyCount(t){t?this.qty++:this.qty>0?this.qty--:this.qty=0}},created(){this.getProduct(this.id)}},ot=e(3744);const ct=(0,ot.Z)(st,[["render",J],["__scopeId","data-v-6e8cc167"]]);var rt=ct}}]);
//# sourceMappingURL=369.e9710a64.js.map