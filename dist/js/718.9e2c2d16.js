"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[718],{9718:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var i=s(6252),d=s(3577);const a=(0,i._)("div",{class:"loadingio-spinner-ripple-o01nobacpbk"},[(0,i._)("div",{class:"ldio-0zlqpdibb6ki"},[(0,i._)("div"),(0,i._)("div")])],-1),o={class:"table mt-4"},l=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{width:"120"},"購買時間"),(0,i._)("th",{width:"120"},"Email"),(0,i._)("th",{width:"200"},"購買款項"),(0,i._)("th",{width:"120"},"應付金額"),(0,i._)("th",{width:"100"},"是否付款"),(0,i._)("th",{width:"200"},"編輯")])],-1),n={class:"form-check form-switch"},r=(0,i._)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},null,-1),h={key:0,class:"text-success"},p={key:1,class:"text-success"},c={class:"btn-group"},u=["onClick"],g=["onClick"];function m(t,e,s,m,w,_){const b=(0,i.up)("LoadingOverlay"),M=(0,i.up)("Pagination"),f=(0,i.up)("DelModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(b,{active:w.isLoading},{default:(0,i.w5)((()=>[a])),_:1},8,["active"]),(0,i._)("table",o,[l,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.orders,((e,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:e[s]},[(0,i._)("td",null,(0,d.zw)(e.category),1),(0,i._)("td",null,(0,d.zw)(e.title),1),(0,i._)("td",null,(0,d.zw)(e.products),1),(0,i._)("td",null,(0,d.zw)(t.$filters.currency(e.price)),1),(0,i._)("td",null,[(0,i._)("div",n,[r,e.is_paid?((0,i.wg)(),(0,i.iD)("span",h,"已付款")):((0,i.wg)(),(0,i.iD)("span",p,"未付款"))])]),(0,i._)("td",null,[(0,i._)("div",c,[(0,i._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>_.openModal(!1,e)},"檢視",8,u),(0,i._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>_.openDelModal(e)},"刪除",8,g)])])])))),128))])]),(0,i.Wm)(M,{pages:w.pagination,onEmitPages:_.getOrders},null,8,["pages","onEmitPages"]),(0,i.Wm)(f,{ref:"delModal",item:w.tempOrder,onDelItem:_.delProduct},null,8,["item","onDelItem"])],64)}var w=s(2821),_=s(8604),b={components:{DelModal:w.Z,Pagination:_.Z},data(){return{orders:[],pagination:{},tempOrder:{},isNew:!1,isLoading:!1}},inject:["pushMessageState"],methods:{getOrders(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/ldd-api/admin/orders?page=${t}`;this.$http.get(e).then((t=>{t.data.success&&(this.isLoading=!1,this.orders=t.data.orders,this.pagination=t.data.pagination)}))},openModal(t,e){this.tempOrder=t?{}:{...e},this.isNew=t;const s=this.$refs.productModal;s.showModal()},updateProduct(t){this.tempOrder=t;const e=this.$refs.productModal;let s="https://vue3-course-api.hexschool.io/api/ldd-api/admin/product",i="post";this.isNew||(s=`https://vue3-course-api.hexschool.io/api/ldd-api/admin/product/${t.id}`,i="put"),this.$http[i](s,{data:this.tempOrder}).then((t=>{this.getOrders(),this.isNew?this.pushMessageState(t,"新增優惠卷"+(this.tempOrder.title?`"${this.tempOrder.title}"`:"")):this.pushMessageState(t,`編輯產品"${this.tempOrder.title}"`)})),e.hideModal()},openDelModal(t){this.tempOrder={...t};const e=this.$refs.delModal;e.showModal()},delProduct(){const t=`https://vue3-course-api.hexschool.io/api/ldd-api/admin/product/${this.tempOrder.id}`;this.$http.delete(t).then((t=>{this.pushMessageState(t,`刪除產品"${this.tempOrder.title}"`);const e=this.$refs.delModal;e.hideModal(),this.getOrders()}))}},created(){this.getOrders()}},M=s(3744);const f=(0,M.Z)(b,[["render",m]]);var k=f}}]);
//# sourceMappingURL=718.9e2c2d16.js.map