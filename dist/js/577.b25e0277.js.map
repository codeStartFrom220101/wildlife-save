{"version":3,"file":"js/577.b25e0277.js","mappings":"sJAIA,MAAMA,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,YAAa,CACtCC,MAAO,KAAM,CAEXC,QAAS,GACTC,UAAW,EACXC,MAAO,CACLC,KAAM,CAAC,EACPC,SAAU,CAAC,GAGbC,SAAU,KAEZC,QAAS,CACPC,YAAaC,EAAO,QAElB,OADAC,KAAKT,QAAUQ,EACPA,GACN,IAAK,OACHC,KAAKR,UAAY,EACjB,MACF,IAAK,QACHQ,KAAKR,UAAY,EACjB,MACF,IAAK,WACHQ,KAAKR,UAAY,EACjB,MACF,IAAK,WACHQ,KAAKR,UAAY,EACjBS,YAAW,KACTD,KAAKR,WAAW,GACf,MACH,MAEN,EACAU,SAAUC,GACR,MAAMC,EAAO,0DAAmED,IAChFE,EAAAA,EAAAA,IAAUD,GACPE,MAAMC,IACL,MAAMd,EAAQc,EAAIC,KAAKf,MACvBO,KAAKP,MAAQA,CAAK,GAExB,EACAgB,UAAWC,EAASC,EAAM,GACxB,MAAMP,EAAO,wDACbjB,EAAOyB,YAAcF,EAAQP,GAC7B,MAAMU,EAAO,CACXC,WAAYJ,EAAQP,GACpBQ,IAAKA,GAEPN,EAAAA,EAAAA,KAAWD,EAAK,CAAEI,KAAMK,IACrBP,MAAMC,IAELpB,EAAOyB,YAAc,GACrBZ,KAAKe,aAAa,GAExB,EACAA,cACE5B,EAAO6B,WAAY,EACnB,MAAMZ,EAAO,wDACbC,EAAAA,EAAAA,IAAUD,GACPE,MAAMC,IACDA,EAAIC,KAAKS,UACX9B,EAAO6B,WAAY,EACnBhB,KAAKJ,SAAWW,EAAIC,KAAKA,KAAKU,MAChC,GAEN,EACAC,mBAAoBhB,GAClB,MAAMC,EAAO,yDAAkED,IAC/EE,EAAAA,EAAAA,UAAaD,GACVE,MAAMC,IACLP,KAAKe,aAAa,GAExB,EACAK,WAAYV,GACVvB,EAAO6B,WAAY,EACnB7B,EAAOyB,YAAcF,EAAQP,GAC7B,MAAMU,EAAO,CACXC,WAAYJ,EAAQI,WACpBH,IAAKD,EAAQC,KAETP,EAAO,yDAAkEM,EAAQP,KACvFH,KAAKqB,MAAMC,IAAIlB,EAAK,CAAEI,KAAMK,IACzBP,MAAK,KACJnB,EAAO6B,WAAY,EACnB7B,EAAOyB,YAAc,GACrBZ,KAAKe,aAAa,GAExB,I,qCC3FJ,QAAe1B,EAAAA,EAAAA,IAAY,cAAe,CACxCC,MAAO,KAAM,CACX0B,WAAW,EACXJ,YAAa,M,qGCJfW,EAAAA,EAAAA,GAA2D,MAAvDC,MAAM,uCAAsC,UAAM,G,GACnDA,MAAM,e,6DADTC,GACAF,EAAAA,EAAAA,GAA8I,IAA9IG,EAA8I,UAAvH,UAAM,QAAGC,EAAAA,MAAMxB,IAAK,KAAE,WAA6F,QAAtFqB,OAAK,wBAAkBG,EAAAA,MAAMC,Y,QAAaD,EAAAA,MAAMC,QAAU,QAAU,UAAb,S,yBAO7G,GACEC,SAAU,KACLC,EAAAA,EAAAA,IAASC,EAAAA,EAAW,CAAC,WAE1BC,QAAS,KACJC,EAAAA,EAAAA,IAAWF,EAAAA,EAAW,CAAC,cAAe,aACzCG,cAAeC,GACTA,GACFlC,YAAW,KACTD,KAAKoC,WAAW,cAAc,GAC7B,KAEP,GAEFC,UACE,MAAMlC,EAAKH,KAAKsC,OAAOC,OAAOC,QAC9BxC,KAAKE,SAASC,GACdH,KAAKF,YAAY,YACjBE,KAAKkC,cAAclC,KAAKP,MAAMmC,QAChC,G,UCvBF,MAAMa,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://new-project/./src/stores/cartStore.js","webpack://new-project/./src/stores/statusStore.js","webpack://new-project/./src/views/CartOrderFinished.vue","webpack://new-project/./src/views/CartOrderFinished.vue?822b"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport axios from 'axios'\r\nimport statusStore from '@/stores/statusStore'\r\n\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    // 購物車四頁資料\r\n    nowPage: '',\r\n    pageCount: 1,\r\n    order: {\r\n      user: {},\r\n      products: {}\r\n    },\r\n    // 購物車列表\r\n    cartList: []\r\n  }),\r\n  actions: {\r\n    getCartPage (page = 'cart') {\r\n      this.nowPage = page\r\n      switch (page) {\r\n        case 'cart':\r\n          this.pageCount = 1\r\n          break\r\n        case 'order':\r\n          this.pageCount = 2\r\n          break\r\n        case 'checkout':\r\n          this.pageCount = 3\r\n          break\r\n        case 'finished':\r\n          this.pageCount = 4\r\n          setTimeout(() => {\r\n            this.pageCount++\r\n          }, 1500)\r\n          break\r\n      }\r\n    },\r\n    getOrder (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          const order = res.data.order\r\n          this.order = order\r\n        })\r\n    },\r\n    addToCart (product, qty = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.id,\r\n        qty: qty\r\n      }\r\n      axios.post(api, { data: cart })\r\n        .then((res) => {\r\n          // this.pushMessageState(res, `${product.title ? `\"${product.title}\"` : ''}放入購物車`)\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    },\r\n    getCartData () {\r\n      status.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      axios.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            status.isLoading = false\r\n            this.cartList = res.data.data.carts\r\n          }\r\n        })\r\n    },\r\n    delProductFromCart (id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      axios.delete(api)\r\n        .then((res) => {\r\n          this.getCartData()\r\n        })\r\n    },\r\n    updateCart (product) {\r\n      status.isLoading = true\r\n      status.loadingItem = product.id\r\n      const cart = {\r\n        product_id: product.product_id,\r\n        qty: product.qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${product.id}`\r\n      this.$http.put(api, { data: cart })\r\n        .then(() => {\r\n          status.isLoading = false\r\n          status.loadingItem = ''\r\n          this.getCartData()\r\n        })\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: false,\r\n    loadingItem: ''\r\n  })\r\n})\r\n","<template>\r\n  <h2 class=\"h3 text-black text-center py-2 mb-0\">感謝您的購買</h2>\r\n  <p class=\"text-center\">您的訂單 \"{{ order.id }}\" <span :class=\"{'text-danger':!order.is_paid}\">{{ order.is_paid ? '已完成付款' : '還未完成付款' }}</span></p>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'pinia'\r\nimport cartStore from '@/stores/cartStore'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState(cartStore, ['order'])\r\n  },\r\n  methods: {\r\n    ...mapActions(cartStore, ['getCartPage', 'getOrder']),\r\n    finishedOrder (isPaid) {\r\n      if (isPaid) {\r\n        setTimeout(() => {\r\n          this.getNowPage('finishOrder')\r\n        }, 1500)\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    const id = this.$route.params.orderId\r\n    this.getOrder(id)\r\n    this.getCartPage('finished')\r\n    this.finishedOrder(this.order.is_paid)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartOrderFinished.vue?vue&type=template&id=519ead8f\"\nimport script from \"./CartOrderFinished.vue?vue&type=script&lang=js\"\nexport * from \"./CartOrderFinished.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\沈長昱\\\\Desktop\\\\程式資料夾\\\\Vue3\\\\vue3 電商\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","nowPage","pageCount","order","user","products","cartList","actions","getCartPage","page","this","setTimeout","getOrder","id","api","axios","then","res","data","addToCart","product","qty","loadingItem","cart","product_id","getCartData","isLoading","success","carts","delProductFromCart","updateCart","$http","put","_createElementVNode","class","_hoisted_1","_hoisted_2","_ctx","is_paid","computed","mapState","cartStore","methods","mapActions","finishedOrder","isPaid","getNowPage","created","$route","params","orderId","__exports__","render"],"sourceRoot":""}