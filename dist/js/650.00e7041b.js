"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[650],{5117:function(t,s,a){var e=a(6330),i=TypeError;t.exports=function(t,s){if(!delete t[s])throw i("Cannot delete property "+e(s)+" of "+e(t))}},541:function(t,s,a){var e=a(2109),i=a(7908),o=a(6244),r=a(3658),c=a(5117),n=a(7207),l=1!==[].unshift(0),d=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();e({target:"Array",proto:!0,arity:1,forced:l||d},{unshift:function(t){var s=i(this),a=o(s),e=arguments.length;if(e){n(a+e);var l=a;while(l--){var d=l+e;l in s?s[d]=s[l]:c(s,d)}for(var u=0;u<e;u++)s[u]=arguments[u]}return r(s,a+e)}})},4677:function(t,s,a){var e=a(9876),i=a(594),o=a(6294);const r=(0,o.Z)();s["Z"]=(0,e.Q_)("cartStore",{state:()=>({nowPage:"",pageCount:1,order:{user:{},products:{}},cartList:[]}),actions:{getCartPage(t="cart"){switch(this.nowPage=t,t){case"cart":this.pageCount=1;break;case"order":this.pageCount=2;break;case"checkout":this.pageCount=3;break;case"finished":this.pageCount=4,setTimeout((()=>{this.pageCount++}),1500);break}},getOrder(t){const s=`https://vue3-course-api.hexschool.io/api/ldd-api/order/${t}`;i.Z.get(s).then((t=>{const s=t.data.order;this.order=s}))},addToCart(t,s=1){const a="https://vue3-course-api.hexschool.io/api/ldd-api/cart";r.loadingItem=t.id;const e={product_id:t.id,qty:s};i.Z.post(a,{data:e}).then((t=>{r.loadingItem="",this.getCartData()}))},getCartData(){r.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/cart";i.Z.get(t).then((t=>{t.data.success&&(r.isLoading=!1,this.cartList=t.data.data.carts)}))},delProductFromCart(t){const s=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t}`;i.Z["delete"](s).then((t=>{this.getCartData()}))},updateCart(t){r.isLoading=!0,r.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty},a=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t.id}`;this.$http.put(a,{data:s}).then((()=>{r.isLoading=!1,r.loadingItem="",this.getCartData()}))}}})},4238:function(t,s,a){a(541),a(7658);var e=a(9876),i=a(594),o=a(6294);const r=(0,o.Z)();s["Z"]=(0,e.Q_)("productStore",{state:()=>({productList:[],productCategoryList:[],categorys:[],categoryNow:"全部商品",product:{},similarList:[],animalList:[]}),actions:{getProducts(t){r.isLoading=!0;const s="https://vue3-course-api.hexschool.io/api/ldd-api/products/all";i.Z.get(s).then((s=>{s.data.success&&(r.isLoading=!1,t?(this.productList=s.data.products.filter((t=>"動物"!==t.category)),this.productCategoryList=this.productList,this.pagination=s.data.pagination,this.getCategoryList()):this.animalList=s.data.products.filter((t=>"動物"===t.category)))}))},categoryChange(t){this.categoryNow=t,this.productCategoryList="全部商品"===t?this.productList:this.productList.filter((s=>s.category===t))},getCategoryList(){const t=this.productList.map((t=>t.category));this.categorys=Array.from(new Set(t)),this.categorys.unshift("全部商品")},getProduct(t){r.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/ldd-api/product/${t}`;i.Z.get(s).then((t=>{t.data.success&&(r.isLoading=!1,this.product=t.data.product,this.getSimilar())}))},getSimilar(){this.similarList=[],r.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/products/all";i.Z.get(t).then((t=>{if(t.data.success){r.isLoading=!1;const s=t.data.products.filter((t=>t.category===this.product.category)),a=s.findIndex((t=>t.id===this.product.id)),e=[];for(let t=0;t<s.length;t++)e.push(t);e.sort((()=>.5-Math.random()));const i=e.findIndex((t=>t===a));e.splice(i,1),this.similarList.push(s[e[0]]),this.similarList.push(s[e[1]]),this.similarList.push(s[e[2]])}}))}}})},6294:function(t,s,a){var e=a(9876);s["Z"]=(0,e.Q_)("statusStore",{state:()=>({isLoading:!1,loadingItem:""})})},650:function(t,s,a){a.r(s),a.d(s,{default:function(){return vt}});var e=a(6252),i=a(3577),o=a(9963);const r=t=>((0,e.dD)("data-v-6472d48e"),t=t(),(0,e.Cn)(),t),c=r((()=>(0,e._)("div",{class:"banner"},null,-1))),n={class:"container py-6"},l={class:"text-black"},d={class:"row justify-content-around mb-2 row-cols-2"},u={class:"col"},p={class:"text-danger"},h=r((()=>(0,e._)("div",{class:"col"},null,-1))),g={class:"row justify-content-around"},f={class:"col-2 d-none d-md-block"},m={class:"px-2"},y=r((()=>(0,e._)("h2",{class:"h5 mt-2"},"產品類型",-1))),v={class:"list-unstyled category-menu"},_=["onClick"],w={class:"col-md-9"},b={class:"row row-cols-1 row-cols-lg-3 g-3 g-md-5"},C={class:"card h-100"},L={class:"container-img"},x=["src","alt"],k={class:"card-body d-flex flex-column"},D={class:"card-title"},Z={class:"text-white bg-secondary rounded fs-8 px-1 ms-2"},$={class:"d-flex flex-column justify-content-between h-100"},j={class:"card-text mb-1 fs-7"},I={class:"card-text text-end"},P={class:"card-footer"},z=["onClick"],T={class:"d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px"}},U={key:1,class:"spinner-grow text-primary spinner-grow-sm",role:"status"},N=r((()=>(0,e._)("span",{class:"visually-hidden"},null,-1))),B=[N];function S(t,s,a,r,N,S){const W=(0,e.up)("LoadingOverlay"),q=(0,e.up)("font-awesome-icon"),H=(0,e.up)("router-link"),M=(0,e.up)("CartBtn");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(W,{active:t.isLoading},null,8,["active"]),c,(0,e._)("div",n,[(0,e._)("section",l,[(0,e._)("div",d,[(0,e._)("div",u,[(0,e.Wm)(H,{to:"home"},{default:(0,e.w5)((()=>[(0,e.Wm)(q,{icon:"fa-solid fa-house"})])),_:1}),(0,e.Uk)(" / "),(0,e.Wm)(H,{to:"productList"},{default:(0,e.w5)((()=>[(0,e.Uk)("市集")])),_:1}),(0,e.Uk)(" / "),(0,e._)("span",p,(0,i.zw)(t.categoryNow),1)]),h]),(0,e._)("div",g,[(0,e._)("div",f,[(0,e._)("div",m,[y,(0,e._)("ul",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.categorys,(s=>((0,e.wg)(),(0,e.iD)("li",{class:"py-1",key:s.id},[(0,e._)("a",{href:"#",class:(0,i.C_)({active:s===t.categoryNow}),onClick:(0,o.iM)((a=>t.categoryChange(s)),["prevent"])},(0,i.zw)(s),11,_)])))),128))])])]),(0,e._)("div",w,[(0,e._)("div",b,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.productCategoryList,((s,a)=>((0,e.wg)(),(0,e.iD)("div",{class:"col",key:a},[(0,e._)("div",C,[(0,e._)("div",L,[(0,e._)("img",{src:s.imageUrl,class:"card-img-top object-fit-cover",alt:s.title,style:{height:"200px"}},null,8,x)]),(0,e._)("div",k,[(0,e._)("h5",D,[(0,e.Uk)((0,i.zw)(s.title)+" ",1),(0,e._)("span",Z,(0,i.zw)(s.category),1)]),(0,e._)("div",$,[(0,e._)("p",j,(0,i.zw)(s.description),1),(0,e._)("p",I,"$NT "+(0,i.zw)(s.price),1)])]),(0,e._)("div",P,[(0,e.Wm)(H,{to:`/userboard/productList/${s.id}`,class:(0,i.C_)(["btn btn-outline-primary",{"stretched-link":t.loadingItem!==s.id&&""===t.loadingItem}])},{default:(0,e.w5)((()=>[(0,e.Uk)("查看商品")])),_:2},1032,["to","class"]),(0,e._)("a",{href:"#",onClick:(0,o.iM)((a=>t.addToCart(s)),["prevent"]),class:(0,i.C_)(["btn btn-outline-primary position-absolute cartBtn fs-4 d-block",{disabled:t.loadingItem===s.id}])},[(0,e._)("div",T,[t.loadingItem!==s.id?((0,e.wg)(),(0,e.j4)(q,{key:0,icon:"fa-solid fa-cart-plus"})):((0,e.wg)(),(0,e.iD)("div",U,B))])],10,z)])])])))),128))])])])]),(0,e.Wm)(M,{onDelProduct:t.delProductFromCart,cartList:t.cartList},null,8,["onDelProduct","cartList"])])],64)}const W=t=>((0,e.dD)("data-v-6606ef5a"),t=t(),(0,e.Cn)(),t),q={class:"bi bi-cart cart-two",ref:"cartBtn"},H={class:"position-absolute fs-8 rounded-circle bg-primary d-flex justify-content-center align-items-center product-num",ref:"productNum"},M={class:"position-fixed cart-container rounded",ref:"cart"},Y={class:"card h-100 p-3"},F={class:"d-flex align-items-center justify-content-between border-bottom px-2 pb-2"},K=W((()=>(0,e._)("h4",{class:"mb-0"},"購物車清單",-1))),O={class:"list-unstyled",style:{"overflow-y":"scroll"}},Q={class:"row g-1 m-0"},A={class:"col-4"},E=["src","alt"],G={class:"col-8"},J={class:"d-flex justify-content-between align-items-center h-100"},R={class:"fs-7"},V={class:"mb-0 fs-8"},X=W((()=>(0,e._)("br",null,null,-1))),tt=["onClick"],st=W((()=>(0,e._)("i",{class:"bi bi-trash"},null,-1))),at=[st],et={key:0,class:"border-top"},it={key:1},ot=W((()=>(0,e._)("p",{class:"text-center"},"購物車還沒有產品~",-1))),rt=[ot];function ct(t,s,a,o,r,c){const n=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("div",{class:"cart-btn-container position-fixed rounded-circle bg-white d-flex justify-content-center align-items-center fs-2",style:{right:"1rem",bottom:"1rem",width:"60px",height:"60px","z-index":"3"},onClick:s[0]||(s[0]=(...t)=>c.openCart&&c.openCart(...t))},[(0,e._)("i",{class:(0,i.C_)(["bi bi-cart cart-one",{"d-none":r.status.cartout}])},null,2),(0,e._)("i",q,null,512),(0,e._)("div",H,[(0,e._)("span",null,(0,i.zw)(a.cartList.length),1)],512)]),(0,e._)("div",M,[(0,e._)("div",Y,[(0,e._)("div",F,[K,(0,e._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:s[1]||(s[1]=(...t)=>c.closeCart&&c.closeCart(...t))})]),(0,e._)("ul",O,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.cartList,(s=>((0,e.wg)(),(0,e.iD)("li",{class:"mt-2",key:s.id},[(0,e._)("div",Q,[(0,e._)("div",A,[(0,e._)("img",{src:s.product.imageUrl,class:"object-fit-cover",style:{height:"75px",width:"75px"},alt:s.product.img},null,8,E)]),(0,e._)("div",G,[(0,e._)("div",J,[(0,e._)("div",null,[(0,e._)("h5",R,(0,i.zw)(s.product.title),1),(0,e._)("p",V,[(0,e.Uk)("NT$ "+(0,i.zw)(t.$filters.currency(s.product.price))+" * "+(0,i.zw)(t.$filters.currency(s.qty)),1),X,(0,e.Uk)(" 共 NT$ "+(0,i.zw)(t.$filters.currency(s.final_total)),1)])]),(0,e._)("button",{type:"button",onClick:a=>t.$emit("del-product",s.id),class:"btn btn-outline-secondary py-1 px-2 fs-5"},at,8,tt)])])])])))),128))]),a.cartList.length>0?((0,e.wg)(),(0,e.iD)("div",et,[(0,e.Wm)(n,{to:"/userboard/cartpage/cart",class:"btn btn-primary w-100 mt-2"},{default:(0,e.w5)((()=>[(0,e.Uk)("快去結帳")])),_:1})])):((0,e.wg)(),(0,e.iD)("div",it,rt))])],512)])}var nt={data(){return{status:{cartout:!1}}},props:["cartList"],methods:{openCart(){this.$refs.cartBtn.classList.add("active"),this.$refs.cart.classList.add("active"),this.$refs.cartBtn.classList.contains("active")?this.status.cartout=!0:this.status.cartout=!1},closeCart(){this.$refs.cartBtn.classList.remove("active"),this.$refs.cart.classList.remove("active"),setTimeout((()=>{this.status.cartout=!1}),500)}}},lt=a(3744);const dt=(0,lt.Z)(nt,[["render",ct],["__scopeId","data-v-6606ef5a"]]);var ut=dt,pt=a(9876),ht=a(4238),gt=a(4677),ft=a(6294),mt={data(){return{}},components:{CartBtn:ut},computed:{...(0,pt.rn)(ht.Z,["productCategoryList","categorys","categoryNow"]),...(0,pt.rn)(gt.Z,["cartList"]),...(0,pt.rn)(ft.Z,["isLoading","loadingItem"])},inject:["pushMessageState","emitter"],methods:{...(0,pt.nv)(ht.Z,["getProducts","categoryChange"]),...(0,pt.nv)(gt.Z,["getCartData","delProductFromCart","addToCart"])},created(){this.getProducts(!0),this.getCartData()}};const yt=(0,lt.Z)(mt,[["render",S],["__scopeId","data-v-6472d48e"]]);var vt=yt}}]);
//# sourceMappingURL=650.00e7041b.js.map