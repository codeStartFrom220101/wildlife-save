"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[912],{4677:function(e,t,a){var s=a(9876),o=a(594),r=a(6294);const i=(0,r.Z)();t["Z"]=(0,s.Q_)("cartStore",{state:()=>({nowPage:"",pageCount:1,order:{user:{},products:{}},cartList:[]}),actions:{getCartPage(e="cart"){switch(this.nowPage=e,e){case"cart":this.pageCount=1;break;case"order":this.pageCount=2;break;case"checkout":this.pageCount=3;break;case"finished":this.pageCount=4,setTimeout((()=>{this.pageCount++}),1500);break}},getOrder(e){const t=`https://vue3-course-api.hexschool.io/api/ldd-api/order/${e}`;o.Z.get(t).then((e=>{const t=e.data.order;this.order=t}))},addToCart(e,t=1){const a="https://vue3-course-api.hexschool.io/api/ldd-api/cart";i.loadingItem=e.id;const s={product_id:e.id,qty:t};o.Z.post(a,{data:s}).then((e=>{i.loadingItem="",this.getCartData()}))},getCartData(){i.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/ldd-api/cart";o.Z.get(e).then((e=>{e.data.success&&(i.isLoading=!1,this.cartList=e.data.data.carts)}))},delProductFromCart(e){const t=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${e}`;o.Z["delete"](t).then((e=>{this.getCartData()}))},updateCart(e){i.isLoading=!0,i.loadingItem=e.id;const t={product_id:e.product_id,qty:e.qty},a=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${e.id}`;this.$http.put(a,{data:t}).then((()=>{i.isLoading=!1,i.loadingItem="",this.getCartData()}))}}})},6294:function(e,t,a){var s=a(9876);t["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,loadingItem:""})})},3912:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var s=a(6252),o=a(9963),r=a(3577);const i=(0,s._)("h2",{class:"h3 text-black text-center py-2 mb-0"},"建立訂單",-1),l={class:"col"},d={class:"position-relative"},n=(0,s._)("div",{class:"invalid-feedback"}," 請輸入姓名 ",-1),c={class:"col"},u={class:"position-relative"},p=(0,s._)("div",{class:"invalid-feedback"}," 請輸入電子郵件 ",-1),m={class:"col"},f={class:"position-relative"},h=(0,s._)("div",{class:"invalid-feedback"}," 請輸入電話號碼 ",-1),v={class:"col"},g={class:"position-relative"},_=(0,s._)("div",{class:"invalid-feedback"}," 請輸入地址 ",-1),b={class:"col"},y=(0,s._)("label",{for:"message",class:"form-label",style:{left:"15px"}},"備註：",-1),C={class:"col-12"},k={class:"d-flex justify-content-end"};function w(e,t,a,w,x,L){return(0,s.wg)(),(0,s.iD)(s.HY,null,[i,(0,s._)("form",{class:"row row-cols-1 p-4 g-3 needs-validation",novalidate:"",onSubmit:t[6]||(t[6]=(...e)=>L.createOrder&&L.createOrder(...e))},[(0,s._)("div",l,[(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control pt-4","onUpdate:modelValue":t[0]||(t[0]=e=>x.form.user.name=e),required:""},null,512),[[o.nr,x.form.user.name]]),(0,s._)("label",{for:"",class:(0,r.C_)(["form-label position-absolute top-50 translate-middle-y",{active:x.form.user.name.split(" ").join("").length>0}]),style:{left:"15px"}},"姓名：",2),n])]),(0,s._)("div",c,[(0,s._)("div",u,[(0,s.wy)((0,s._)("input",{type:"email",class:"form-control pt-4","onUpdate:modelValue":t[1]||(t[1]=e=>x.form.user.email=e),required:""},null,512),[[o.nr,x.form.user.email]]),(0,s._)("label",{for:"",class:(0,r.C_)(["form-label position-absolute top-50 translate-middle-y",{active:x.form.user.email.split(" ").join("").length>0}]),style:{left:"15px"}},"電子郵件：",2),p])]),(0,s._)("div",m,[(0,s._)("div",f,[(0,s.wy)((0,s._)("input",{type:"tel",class:"form-control pt-4","onUpdate:modelValue":t[2]||(t[2]=e=>x.form.user.tel=e),required:""},null,512),[[o.nr,x.form.user.tel]]),(0,s._)("label",{for:"",class:(0,r.C_)(["form-label position-absolute top-50 translate-middle-y",{active:x.form.user.tel.split(" ").join("").length>0}]),style:{left:"15px"}},"聯絡電話：",2),h])]),(0,s._)("div",v,[(0,s._)("div",g,[(0,s.wy)((0,s._)("input",{type:"address",class:"form-control pt-4","onUpdate:modelValue":t[3]||(t[3]=e=>x.form.user.address=e),required:""},null,512),[[o.nr,x.form.user.address]]),(0,s._)("label",{for:"",class:(0,r.C_)(["form-label position-absolute top-50 translate-middle-y",{active:x.form.user.address.split(" ").join("").length>0}]),style:{left:"15px"}},"地址：",2),_])]),(0,s._)("div",b,[y,(0,s.wy)((0,s._)("textarea",{class:"form-control",id:"message",rows:"8","onUpdate:modelValue":t[4]||(t[4]=e=>x.form.user.message=e),style:{resize:"none"}},null,512),[[o.nr,x.form.user.message]])]),(0,s._)("div",C,[(0,s._)("div",k,[(0,s._)("button",{class:"btn btn-primary",type:"submit",onClick:t[5]||(t[5]=(...e)=>L.formValidation&&L.formValidation(...e))},"送出訂單")])])],32)],64)}a(7658);var x=a(9876),L=a(4677),V={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{...(0,x.nv)(L.Z,["getCartPage"]),createOrder(){const e="https://vue3-course-api.hexschool.io/api/ldd-api/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{e.data.success?this.$router.push(`checkout/${e.data.orderId}`):"購物車內無資料"===e.data.message?alert("您的購物車還是空的"):alert("您的資料未填完整")}))},formValidation(){const e=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(e).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}},created(){this.getCartPage("order")}},Z=a(3744);const q=(0,Z.Z)(V,[["render",w]]);var j=q}}]);
//# sourceMappingURL=912.93394592.js.map