{"version":3,"file":"js/718.9e2c2d16.js","mappings":"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","sources":["webpack://new-project/./src/views/OrdersView.vue","webpack://new-project/./src/views/OrdersView.vue?e537"],"sourcesContent":["<template>\r\n  <LoadingOverlay :active=\"isLoading\">\r\n    <div class=\"loadingio-spinner-ripple-o01nobacpbk\">\r\n      <div class=\"ldio-0zlqpdibb6ki\">\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  </LoadingOverlay>\r\n  <table class=\"table mt-4\">\r\n    <thead>\r\n      <tr>\r\n        <th width=\"120\">購買時間</th>\r\n        <th width=\"120\">Email</th>\r\n        <th width=\"200\">購買款項</th>\r\n        <th width=\"120\">應付金額</th>\r\n        <th width=\"100\">是否付款</th>\r\n        <th width=\"200\">編輯</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(item, key) in orders\" :key=\"item[key]\">\r\n        <td>{{ item.category }}</td>\r\n        <td>{{ item.title }}</td>\r\n        <td>\r\n          {{ item.products }}\r\n        </td>\r\n        <td>\r\n          {{ $filters.currency(item.price) }}\r\n        </td>\r\n        <td>\r\n          <div class=\"form-check form-switch\">\r\n            <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"flexSwitchCheckDefault\">\r\n          <span class=\"text-success\" v-if=\"item.is_paid\">已付款</span>\r\n          <span class=\"text-success\" v-else>未付款</span>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button class=\"btn btn-outline-primary btn-sm\" @click=\"openModal(false, item)\">檢視</button>\r\n            <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDelModal(item)\">刪除</button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"></Pagination>\r\n  <DelModal ref=\"delModal\" :item=\"tempOrder\" @del-item=\"delProduct\"></DelModal>\r\n</template>\r\n\r\n<script>\r\nimport DelModal from '../components/DelModal.vue'\r\nimport Pagination from '../components/PaginationC.vue'\r\n\r\nexport default {\r\n  components: {\r\n    DelModal,\r\n    Pagination\r\n  },\r\n  data () {\r\n    return {\r\n      orders: [],\r\n      pagination: {},\r\n      tempOrder: {},\r\n      isNew: false,\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['pushMessageState'],\r\n  methods: {\r\n    getOrders (page = 1) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            this.orders = res.data.orders\r\n            this.pagination = res.data.pagination\r\n          }\r\n        })\r\n    },\r\n    openModal (isNew, item) {\r\n      if (isNew) {\r\n        this.tempOrder = {}\r\n      } else {\r\n        this.tempOrder = { ...item }\r\n      }\r\n      this.isNew = isNew\r\n      const productComponent = this.$refs.productModal\r\n      productComponent.showModal()\r\n    },\r\n    updateProduct (item) {\r\n      this.tempOrder = item\r\n      const productComponent = this.$refs.productModal\r\n      // 新增\r\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`\r\n      let httpMethod = 'post'\r\n      // 編輯\r\n      if (!this.isNew) {\r\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`\r\n        httpMethod = 'put'\r\n      }\r\n      this.$http[httpMethod](api, { data: this.tempOrder })\r\n        .then((res) => {\r\n          this.getOrders()\r\n          if (this.isNew) {\r\n            this.pushMessageState(res, `新增優惠卷${this.tempOrder.title ? `\"${this.tempOrder.title}\"` : ''}`)\r\n          } else {\r\n            this.pushMessageState(res, `編輯產品\"${this.tempOrder.title}\"`)\r\n          }\r\n        })\r\n      productComponent.hideModal()\r\n    },\r\n    openDelModal (item) {\r\n      this.tempOrder = { ...item }\r\n      const delComponent = this.$refs.delModal\r\n      delComponent.showModal()\r\n    },\r\n    delProduct () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempOrder.id}`\r\n      this.$http.delete(api)\r\n        .then(res => {\r\n          this.pushMessageState(res, `刪除產品\"${this.tempOrder.title}\"`)\r\n          const delComponent = this.$refs.delModal\r\n          delComponent.hideModal()\r\n          this.getOrders()\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrdersView.vue?vue&type=template&id=2b897174\"\nimport script from \"./OrdersView.vue?vue&type=script&lang=js\"\nexport * from \"./OrdersView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\沈長昱\\\\Desktop\\\\程式資料夾\\\\Vue3\\\\動物捐獻網站\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","width","type","role","id","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_createElementBlock","_Fragment","item","key","category","title","products","_ctx","currency","price","_hoisted_4","_hoisted_5","is_paid","_hoisted_6","_hoisted_7","_hoisted_8","onClick","$options","_component_Pagination","pages","onEmitPages","_component_DelModal","ref","onDelItem","components","DelModal","Pagination","data","orders","pagination","tempOrder","isNew","isLoading","inject","methods","getOrders","page","this","api","$http","get","then","res","success","openModal","productComponent","$refs","productModal","showModal","updateProduct","httpMethod","pushMessageState","hideModal","openDelModal","delComponent","delModal","delProduct","delete","created","__exports__","render"],"sourceRoot":""}