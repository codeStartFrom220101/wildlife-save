"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[15],{4677:function(t,e,a){var s=a(9876),o=a(594),r=a(6294);const i=(0,r.Z)();e["Z"]=(0,s.Q_)("cartStore",{state:()=>({nowPage:"",pageCount:1,order:{user:{},products:{}},cartList:[]}),actions:{getCartPage(t="cart"){switch(this.nowPage=t,t){case"cart":this.pageCount=1;break;case"order":this.pageCount=2;break;case"checkout":this.pageCount=3;break;case"finished":this.pageCount=4,setTimeout((()=>{this.pageCount++}),1500);break}},getOrder(t){const e=`https://vue3-course-api.hexschool.io/api/ldd-api/order/${t}`;o.Z.get(e).then((t=>{const e=t.data.order;this.order=e}))},addToCart(t,e=1){const a="https://vue3-course-api.hexschool.io/api/ldd-api/cart";i.loadingItem=t.id;const s={product_id:t.id,qty:e};o.Z.post(a,{data:s}).then((t=>{i.loadingItem="",this.getCartData()}))},getCartData(){i.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ldd-api/cart";o.Z.get(t).then((t=>{t.data.success&&(i.isLoading=!1,this.cartList=t.data.data.carts)}))},delProductFromCart(t){const e=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t}`;o.Z["delete"](e).then((t=>{this.getCartData()}))},updateCart(t){i.isLoading=!0,i.loadingItem=t.id;const e={product_id:t.product_id,qty:t.qty},a=`https://vue3-course-api.hexschool.io/api/ldd-api/cart/${t.id}`;this.$http.put(a,{data:e}).then((()=>{i.isLoading=!1,i.loadingItem="",this.getCartData()}))}}})},6294:function(t,e,a){var s=a(9876);e["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,loadingItem:""})})},5015:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var s=a(6252),o=a(3577),r=a(9963);const i=(0,s._)("div",{class:"loadingio-spinner-ripple-o01nobacpbk"},[(0,s._)("div",{class:"ldio-0zlqpdibb6ki"},[(0,s._)("div"),(0,s._)("div")])],-1),n=(0,s._)("h2",{class:"h3 text-black text-center py-2 mb-0"},"購物車清單",-1),c={class:"table table-striped mb-0 text-center"},l={key:0},d=(0,s._)("th",{colspan:"2"},"商品",-1),u=(0,s._)("th",{scope:"col"},"商品單價",-1),p=(0,s._)("th",{scope:"col"},"數量",-1),h=(0,s._)("th",{scope:"col"},"單品項總價",-1),g=(0,s._)("th",{scope:"col"},"刪除",-1),_=[d,u,p,h,g],b={key:1},m={colspan:"6",class:"text-center"},C=(0,s._)("p",{class:"mb-1"},"您還沒加入任何商品",-1),k={colspan:"2"},y={class:"mb-0"},f={class:"d-flex justify-content-center align-items-center h-100"},v={class:"input-group input-group-sm",style:{width:"50px"}},w=["onUpdate:modelValue","onChange"],x=["onClick"],L=(0,s._)("i",{class:"bi bi-trash"},null,-1),D=[L],Z=(0,s._)("tr",null,[(0,s._)("td",{colspan:"6",class:"py-5"},[(0,s._)("div",{class:"d-flex flex-column align-items-center"},[(0,s._)("h3",{class:"h4 mb-2 text-center"},"購買須知"),(0,s._)("p",{class:"mb-0 text-start fs-6"},[(0,s.Uk)(" ※ 您購買商品之所得將全數用於動物救助行動中。"),(0,s._)("br"),(0,s.Uk)(" ※ 請確認所填寫的資料是否正確，下單後未提供修改付款方式服務。"),(0,s._)("br"),(0,s.Uk)(" ※ 因拍攝略有色差，圖片僅供參考，顏色請以實際收到商品為準。"),(0,s._)("br"),(0,s.Uk)(" ※ 本店商品目前只供應台灣地區，只提供宅配到府。"),(0,s._)("br"),(0,s.Uk)(" ※ 目前支援貨到付款、超商付款。"),(0,s._)("br"),(0,s.Uk)(" ※ 本店商品為統一會於付款後7個工作日內出貨(不含假日)。")])])])],-1),U={colspan:"6",class:"text-end pe-5"};function P(t,e,a,d,u,p){const h=(0,s.up)("LoadingOverlay"),g=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(h,{active:u.isLoading},{default:(0,s.w5)((()=>[i])),_:1},8,["active"]),n,(0,s._)("table",c,[(0,s._)("thead",null,[t.cartList.length>0?((0,s.wg)(),(0,s.iD)("tr",l,_)):((0,s.wg)(),(0,s.iD)("tr",b,[(0,s._)("th",m,[C,(0,s.Wm)(g,{to:"/userboard/productList",class:"btn btn-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)("點此手刀去選購~")])),_:1})])]))]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cartList,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",k,(0,o.zw)(e.product.title),1),(0,s._)("td",null,[(0,s._)("p",y,"NT$ "+(0,o.zw)(t.$filters.currency(e.product.price)),1)]),(0,s._)("td",f,[(0,s._)("div",v,[(0,s.wy)((0,s._)("input",{type:"number",min:"1",class:"form-control","onUpdate:modelValue":t=>e.qty=t,onChange:a=>t.updateCart(e)},null,40,w),[[r.nr,e.qty,void 0,{number:!0}]])])]),(0,s._)("td",null,(0,o.zw)(t.$filters.currency(e.final_total)),1),(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary fs-8 px-2 py-1",onClick:a=>t.delProductFromCart(e.id)},D,8,x)])])))),128)),Z,(0,s._)("tr",null,[(0,s._)("td",U,[(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>p.goToCheck&&p.goToCheck(...t))},"建立訂單")])])])])],64)}a(7658);var $=a(9876),T=a(4677),q={data(){return{isLoading:!1,status:{loadingItem:""}}},computed:{...(0,$.rn)(T.Z,["cartList"])},inject:["emitter"],methods:{...(0,$.nv)(T.Z,["getCartPage","addToCart","getCartData","delProductFromCart","updateCart"]),goToCheck(){this.cartList.length>0?this.$router.push("check"):alert("您的購物車沒有商品~")}},created(){this.getCartData(),this.getCartPage()}},I=a(3744);const j=(0,I.Z)(q,[["render",P]]);var z=j}}]);
//# sourceMappingURL=15.a1a09415.js.map